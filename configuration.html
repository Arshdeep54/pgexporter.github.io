---
layout: default
---

<div id="home">
    <h1>
        {% for header in site.headers %}
        <a class="header" href="{{ header.url }}">{{ header.name }}</a>
        {% endfor %}
    </h1>
    <p/>

    <h2>pgexporter.conf</h2>

    <h3>[pgexporter]</h3>

    Main configuration of pgexporter.
    <p/>
    
    <table border="1">
      <thead>
        <th align="left">Property</th>
        <th align="left">Default</th>
        <th align="left">Unit</th>
        <th align="left">Required</th>
        <th align="left">Description</th>
      </thead>
      <tbody>
        <tr>
          <td>host</td>
          <td></td>
          <td>String</td>
          <td>Yes</td>
          <td>The bind address for pgexporter</td>
        </tr>
        <tr>
          <td>unix_socket_dir</td>
          <td></td>
          <td>String</td>
          <td>Yes</td>
          <td>The Unix Domain Socket location</td>
        </tr>
        <tr>
          <td>metrics</td>
          <td></td>
          <td>Int</td>
          <td>Yes</td>
          <td>The metrics port</td>
        </tr>
        <tr>
          <td>metrics_path</td>
          <td></td>
          <td>String</td>
          <td>No</td>
          <td>Path to customized metrics (either a YAML file or a directory with YAML files)</td>
        </tr>
        <tr>
          <td>metrics_cache_max_age</td>
          <td>0</td>
          <td>String</td>
          <td>No</td>
          <td>The number of seconds to keep in cache a Prometheus (metrics) response. If set to zero, the caching
            will be disabled. Can be a string with a suffix, like 2m to indicate 2 minutes</td>
        </tr>
        <tr>
          <td>metrics_cache_max_size</td>
          <td>256k</td>
          <td>String</td>
          <td>No</td>
          <td>The maximum amount of data to keep in cache when serving Prometheus responses. Changes require restart.
            This parameter determines the size of memory allocated for the cache even if metrics_cache_max_age or
            metrics are disabled. Its value, however, is taken into account only if metrics_cache_max_age is set to
            a non-zero value. Supports suffixes: B (bytes), the default if omitted, K or KB (kilobytes), M or
            MB (megabytes), G or GB (gigabytes)</td>
        </tr>
        <tr>
          <td>management</td>
          <td>0</td>
          <td>Int</td>
          <td>No</td>
          <td>The remote management port (disable = 0)</td>
        </tr>
        <tr>
          <td>cache</td>
          <td>on</td>
          <td>Bool</td>
          <td>No</td>
          <td>Cache connection</td>
        </tr>
        <tr>
          <td>log_type</td>
          <td>console</td>
          <td>String</td>
          <td>No</td>
          <td>The logging type (console, file, syslog)</td>
        </tr>
        <tr>
          <td>log_level</td>
          <td>info</td>
          <td>String</td>
          <td>No</td>
          <td>The logging level, any of the (case insensitive) strings FATAL, ERROR, WARN, INFO and DEBUG
            (that can be more specific as DEBUG1 thru DEBUG5). Debug level greater than 5 will be set to DEBUG5.
            Not recognized values will make the log_level be INFO</td>
        </tr>
        <tr>
          <td>log_path</td>
          <td>pgexporter.log</td>
          <td>String</td>
          <td>No</td>
          <td>The log file location. Can be a strftime(3) compatible string</td>
        </tr>
        <tr>
          <td>log_rotation_age</td>
          <td>0</td>
          <td>String</td>
          <td>No</td>
          <td>The age that will trigger a log file rotation. If expressed as a positive number, is managed as seconds.
            Supports suffixes: S (seconds, the default), M (minutes), H (hours), D (days), W (weeks). A value of 0 disables</td>
        </tr>
        <tr>
          <td>log_rotation_size</td>
          <td>0</td>
          <td>String</td>
          <td>No</td>
          <td>The size of the log file that will trigger a log rotation. Supports suffixes: B (bytes), the default if omitted,
            K or KB (kilobytes), M or MB (megabytes), G or GB (gigabytes). A value of 0 (with or without suffix) disables</td>
        </tr>
        <tr>
          <td>log_line_prefix</td>
          <td>%Y-%m-%d %H:%M:%S</td>
          <td>String</td>
          <td>No</td>
          <td>A strftime(3) compatible string to use as prefix for every log line. Must be quoted if contains spaces</td>
        </tr>
        <tr>
          <td>log_mode</td>
          <td>append</td>
          <td>String</td>
          <td>No</td>
          <td>Append to or create the log file (append, create)</td>
        </tr>
        <tr>
          <td>blocking_timeout</td>
          <td>30</td>
          <td>Int</td>
          <td>No</td>
          <td>The number of seconds the process will be blocking for a connection (disable = 0)</td>
        </tr>
        <tr>
          <td>tls</td>
          <td>off</td>
          <td>Bool</td>
          <td>No</td>
          <td>Enable Transport Layer Security (TLS)</td>
        </tr>
        <tr>
          <td>tls_cert_file</td>
          <td></td>
          <td>String</td>
          <td>No</td>
          <td>Certificate file for TLS. This file must be owned by either the user running pgexporter or root</td>
        </tr>
        <tr>
          <td>tls_key_file</td>
          <td></td>
          <td>String</td>
          <td>No</td>
          <td>Private key file for TLS. This file must be owned by either the user running pgexporter or root.
            Additionally permissions must be at least 0640 when owned by root or 0600 otherwise.</td>
        </tr>
        <tr>
          <td>tls_ca_file</td>
          <td></td>
          <td>String</td>
          <td>No</td>
          <td>Certificate Authority (CA) file for TLS. This file must be owned by either the user running pgexporter or root</td>
        </tr>
        <tr>
          <td>libev</td>
          <td>auto</td>
          <td>String</td>
          <td>No</td>
          <td>Select the <a href="http://software.schmorp.de/pkg/libev.html">libev</a> backend to use. Valid options: auto, select, poll, epoll, iouring, devpoll and port</td>
        </tr>
        <tr>
          <td>buffer_size</td>
          <td>65535</td>
          <td>Int</td>
          <td>No</td>
          <td>The network buffer size (SO_RCVBUF and SO_SNDBUF)</td>
        </tr>
        <tr>
          <td>keep_alive</td>
          <td>on</td>
          <td>Bool</td>
          <td>No</td>
          <td>Have SO_KEEPALIVE on sockets</td>
        </tr>
        <tr>
          <td>nodelay</td>
          <td>on</td>
          <td>Bool</td>
          <td>No</td>
          <td>Have TCP_NODELAY on sockets</td>
        </tr>
        <tr>
          <td>non_blocking</td>
          <td>on</td>
          <td>Bool</td>
          <td>No</td>
          <td>Have O_NONBLOCK on sockets</td>
        </tr>
        <tr>
          <td>backlog</td>
          <td>16</td>
          <td>Int</td>
          <td>No</td>
          <td>The backlog for listen(). Minimum 16</td>
        </tr>
        <tr>
          <td>hugepage</td>
          <td>try</td>
          <td>String</td>
          <td>No</td>
          <td>Huge page support (off, try, on)</td>
        </tr>
        <tr>
          <td>pidfile</td>
          <td></td>
          <td>String</td>
          <td>No</td>
          <td>Path to the PID file</td>
        </tr>
        <tr>
          <td>update_process_title</td>
          <td>verbose</td>
          <td>String</td>
          <td>No</td>
          <td>
            The behavior for updating the operating system process title. Allowed settings are: never (or off),
            does not update the process title; strict to set the process title without overriding the existing
            initial process title length; minimal to set the process title to the base description;
            verbose (or full) to set the process title to the full description. Please note that strict and minimal
            are honored only on those systems that do not provide a native way to set the process title (e.g., Linux).
            On other systems, there is no difference between strict and minimal and the assumed behaviour is minimal
            even if strict is used. never and verbose are always honored, on every system. On Linux systems the process
            title is always trimmed to 255 characters, while on system that provide a natve way to set the process title it can be longer
          </td>
        </tr>
      </tbody>
    </table>

    <p/>
      
    <h3>Server section</h3>

    Specifies the PostgreSQL instances.
    <p/>

    <table border="1">
      <thead>
        <th align="left">Property</th>
        <th align="left">Default</th>
        <th align="left">Unit</th>
        <th align="left">Required</th>
        <th align="left">Description</th>
      </thead>
      <tbody>
        <tr>
          <td>host</td>
          <td></td>
          <td>String</td>
          <td>Yes</td>
          <td>The address of the PostgreSQL instance</td>
        </tr>
        <tr>
          <td>port</td>
          <td></td>
          <td>Int</td>
          <td>Yes</td>
          <td>The port of the PostgreSQL instance</td>
        </tr>
        <tr>
          <td>user</td>
          <td></td>
          <td>String</td>
          <td>Yes</td>
          <td>The user name</td>
        </tr>
        <tr>
          <td>data_dir</td>
          <td></td>
          <td>String</td>
          <td>No</td>
          <td>The location of the data directory</td>
        </tr>
        <tr>
          <td>wal_dir</td>
          <td></td>
          <td>String</td>
          <td>No</td>
          <td>The location of the WAL directory</td>
        </tr>
      </tbody>
    </table>

    <p/>
    The configuration is loaded from either the path specified by the -c flag or /etc/pgexporter/pgexporter.conf.

    <h3>Example</h3>

    <pre>
[pgexporter]
host = *
metrics = 5002

log_type = file
log_level = info
log_path = /tmp/pgexporter.log

unix_socket_dir = /tmp/

[primary]
host = localhost
port = 5432
user = pgexporter
    </pre>

    <h2>pgexporter_users.conf</h2>

    The pgexporter_users configuration defines the users known to the system. This file is created and managed through
    the pgexporter-admin tool.
    <p/>
    The configuration is loaded from either the path specified by the -u flag or /etc/pgexporter/pgexporter_users.conf.

    <h2>pgexporter_admins.conf</h2>

    The pgexporter_admins configuration defines the administrators known to the system. This file is created and managed through
    the pgexporter-admin tool.
    <p/>
    The configuration is loaded from either the path specified by the -A flag or /etc/pgexporter/pgexporter_admins.conf.
    <p/>

    If pgexporter has both Transport Layer Security (TLS) and "management" enabled then pgexporter-cli can
    connect with TLS using the files ~/.pgexporter/pgexporter.key (must be 0600 permission),
    ~/.pgexporter/pgexporter.crt and ~/.pgexporter/root.crt.

</div>
